<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>People Partner Portal | Leadership Launchpad</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Portal Content - Hidden until authentication -->
    <div id="portalContent" style="display: none;">
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-title">
                <h1>People Partner Portal</h1>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="portal-btn" onclick="signOut()" style="background-color: #FF8C42;">Sign Out</button>
                <button class="portal-btn" onclick="window.location.href='index.html'">Back to Home</button>
            </div>
        </div>
    </header>

    <!-- Welcome Banner -->
    <section class="welcome-banner">
        <div class="welcome-container">
            <h2 class="welcome-title">Welcome, People Partners!</h2>
            <p class="welcome-message">You are the compass that guides associates to grow and develop. As a People Partner, you're instrumental in shaping the leadership culture, supporting career advancement, and unlocking the potential within your teams. Together, we build leaders who drive excellence and create lasting impact.</p>
        </div>
    </section>

    <!-- Calendar Section -->
    <section class="calendar-section">
        <div class="calendar-container">
            <h2 class="calendar-title">2026 Calendar & Important Dates</h2>
            <p class="calendar-subtitle">Keep track of key dates and leadership initiatives throughout the year</p>
            <table class="calendar-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Event</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>February 24-26, 2026</td>
                        <td>Multiple Workshops - Available Sessions</td>
                    </tr>
                    <tr>
                        <td>February 27 - March 1, 2026</td>
                        <td>Multiple Workshops - Available Sessions</td>
                    </tr>
                    <tr>
                        <td>March 2-4, 2026</td>
                        <td>YBM</td>
                    </tr>
                    <tr>
                        <td>March 14-27, 2026</td>
                        <td>Q1 Talent Reviews Due</td>
                    </tr>
                    <tr>
                        <td>March 17-19, 2026</td>
                        <td>Multiple Workshops - Available Sessions</td>
                    </tr>
                    <tr>
                        <td>March 20-22, 2026</td>
                        <td>Multiple Workshops - Available Sessions</td>
                    </tr>
                    <tr>
                        <td>April 14-16, 2026</td>
                        <td>Multiple Workshops - Available Sessions</td>
                    </tr>
                    <tr>
                        <td>April 16-18, 2026</td>
                        <td>Multiple Workshops - Available Sessions</td>
                    </tr>
                    <tr>
                        <td>April 17-19, 2026</td>
                        <td>Multiple Workshops - Available Sessions</td>
                    </tr>
                    <tr>
                        <td>April 18-20, 2026</td>
                        <td>Multiple Workshops - Available Sessions</td>
                    </tr>
                    <tr>
                        <td>May 9 - June 12, 2026</td>
                        <td>Q2 Talent Reviews Due</td>
                    </tr>
                </tbody>
            </table>
            <p style="margin-top: 20px; text-align: center;">
                <a href="https://ce.walmart.com/content/walmart-academy/en_us/home-office/quarterly-home-office-course-offerings.html" target="_blank" style="color: #5B7FFF; font-weight: 600; text-decoration: none;">Register for Workshops or View More Details â†’</a>
            </p>
        </div>
    </section>

    <!-- Mission Control Section -->
    <section id="mission-control" class="mission-section">
        <div class="mission-container">
            <h2 class="mission-title">Mission Control</h2>
            <p class="mission-note">Click buttons to learn more.</p>
            
            <!-- Mission Buttons with Content Tiles -->
            <div class="mission-buttons-section">
                <h3 class="section-title">Resources and Surveys</h3>
                <div class="mission-buttons">
                <button class="dashboard-btn active">
                    <div class="btn-content">
                        <div class="flip-card">
                            <div class="flip-card-inner">
                                <div class="flip-card-front">
                                    <h3>TAP & Roadmap</h3>
                                </div>
                                <div class="flip-card-back">
                                    <ul class="flip-links">
                                        <li><a href="TAP.pdf" target="_blank">TAP PDF</a></li>
                                        <li><a href="#" onclick="openImageModal('Roadmap.jpg'); return false;">View Roadmap</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </button>
                <button class="dashboard-btn">
                    <div class="btn-content">
                        <div class="flip-card">
                            <div class="flip-card-inner">
                                <div class="flip-card-front">
                                    <h3>Templates</h3>
                                </div>
                                <div class="flip-card-back">
                                    <ul class="flip-links">
                                        <li><a href="mailto:?subject=Your%20Role%20in%20the%20Experience%20Leadership%20Development%20Program&body=Hi%20Leaders%2C%0A%0AAs%20part%20of%20our%20continued%20commitment%20to%20growing%20strong%2C%20capable%20leaders%20across%20Experience%2C%20we%20are%20introducing%20a%20more%20structured%20and%20data-driven%20approach%20to%20leadership%20development.%20I%20want%20to%20share%20the%20%22why%22%20behind%20the%20program%2C%20what%20you%20can%20expect%2C%20and%20the%20important%20role%20you%20play%20in%20shaping%20future%20development%20experiences%20for%20your%20teams.%0A%0AWhy%20This%20Matters%3F%0ALeader%20Academy%20is%20a%20critical%20milestone%20in%20preparing%20our%20leaders%20for%20success%E2%80%94but%20the%20development%20shouldn%27t%20stop%20when%20the%20Academy%20session%20ends.%20To%20better%20support%20leaders%20after%20they%20complete%20Academy%2C%20we%20are%20implementing%20a%20streamlined%20feedback%20process%20that%20helps%20us%20understand%20what%27s%20working%2C%20where%20skill%20gaps%20remain%2C%20and%20what%20additional%20support%20leaders%20may%20need.%0A%0AYour%20insights%20as%20a%20leader%20provide%20a%20meaningful%20lens%20into%20how%20your%20associates%20apply%20what%20they%20learned%2C%20how%20prepared%20they%20are%20for%20their%20roles%2C%20and%20what%20follow-up%20development%20can%20help%20them%20be%20even%20more%20successful.%0A%0AYour%20Role%3F%0A90%20days%20after%20your%20associate%20attends%20Leader%20Academy%2C%20you%20will%20receive%20a%20short%20follow-up%20survey%20to%20capture%20your%20observations%20and%20feedback%20on%20their%20learning.%0A%0AThis%20survey%20will%20come%20to%20you%20directly%20via%20email%2C%20and%20it%20will%20also%20be%20available%20at%20any%20time%20on%20the%20Leadership%20Launchpad.%20The%20survey%20only%20takes%20a%20few%20minutes%20but%20has%20a%20significant%20impact%20on%20identifying%20the%20leadership%20development%20needs%20across%20the%20Experience%20Organization.%0A%0AWhat%20Is%20the%20Leadership%20Launchpad%3F%0AThe%20Leadership%20Launchpad%20is%20our%20new%20centralized%20hub%20designed%20to%20support%20leaders%20throughout%20their%20career.%20This%20hub%20will%20include%20links%20to%20current%20enterprise%20sites%20%28i.e.%2C%20me%40campus%29%2C%20post-Academy%20Survey%20data%2C%20and%20other%20self-guided%20resources.%20%28Link%3A%20https%3A%2F%2Fm0h01c4.github.io%2FLeadership-Launchpad%2Findex.html%29%0A%0AWhat%27s%20Ahead%20Next%20Year%3F%0ATo%20create%20a%20seamless%2C%20year-round%20development%20journey%2C%20here%20is%20what%20you%20can%20expect%20from%20the%20program%20in%20the%20upcoming%20cycle%3A%0A%E2%80%A2%20Quarterly%20development%20themes%20based%20on%20Performance%20calibrations%2C%20AES%20insights%2C%20Talent%20Review%20feedback%2C%20and%20Leader%20Academy%20Post-Survey%20data%20that%20lead%20to%20targeted%20workshops%20and%20learning%20experiences.%0A%E2%80%A2%20Regular%20updates%20provided%20by%20your%20People%20Partners%20on%20quarterly%20focused%20content%20that%20is%20rolling%20out.%0A%0AThank%20you%20for%20helping%20us%20build%20a%20stronger%20leadership%20foundation%20for%20our%20teams.%20Your%20feedback%20and%20engagement%20are%20essential%20to%20creating%20meaningful%20development%20experiences%20that%20truly%20make%20a%20difference.%0A%0AIf%20you%20have%20questions%20about%20the%20Leadership%20Launchpad%20or%20your%20responsibilities%20in%20the%20process%2C%20please%20reach%20out%E2%80%94we%27re%20here%20to%20help.">Email for Launch<br>(to Leaders)</a></li>
                                        <li><a href="mailto:?subject=Post%20Leader%20Academy%20Feedback%20Survey&body=Hello%20Leader%2C%0A%0AIt%20has%20been%2090%20days%20since%20your%20associate%20completed%20leadership%20training.%20We%20are%20requesting%20your%20support%20in%20completing%20a%20brief%20follow-up%20survey%20to%20help%20us%20understand%20the%20impact%20of%20the%20training.%0A%0AYour%20perspective%20as%20a%20leader%20is%20invaluable.%20Your%20insights%20provide%20meaningful%20context%20into%20how%20associates%20are%20applying%20what%20they%20learned%2C%20their%20readiness%20for%20their%20roles%2C%20and%20the%20types%20of%20follow-up%20development%20that%20may%20further%20support%20their%20success.%0A%0AThe%20survey%20should%20take%20only%20a%20few%20minutes%20to%20complete%2C%20and%20your%20feedback%20will%20help%20inform%20future%20development%20efforts%20and%20ensure%20we%20continue%20to%20strengthen%20our%20leadership%20pipeline.%0A%0AThank%20you%20in%20advance%20for%20your%20time%20and%20partnership.%0A%0ALink%20to%20survey%3A%20Leader%20Academy%20Post%20Survey%20%28https%3A%2F%2Fforms.office.com%2Fr%2FpqM3Jd8LvL%29">Survey Email</a></li>
                                        <li><a href="FAQs.pdf" target="_blank" download>FAQs</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </button>
                <button class="dashboard-btn">
                    <div class="btn-content">
                        <div class="flip-card">
                            <div class="flip-card-inner">
                                <div class="flip-card-front">
                                    <h3>Surveys</h3>
                                </div>
                                <div class="flip-card-back">
                                    <ul class="flip-links">
                                        <li><a href="https://forms.microsoft.com/Pages/ResponsePage.aspx?id=08O8PE0JBkCYSQ0R1h9ITU2s7rvgfu5AmjciD-OGmMNUMVpQTUE3WUQ0UzFWRlRXVTNZWEgxTkRNTy4u" target="_blank">Post Leader Academy Survey</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </button>
            </div>
                </div>
            </div>

            <!-- Self Development Section -->
            <div class="mission-buttons-section">
                <h3 class="section-title">People Partner Data Hub</h3>
                <div class="self-dev-rectangles">
                    <a href="https://tableau-entprod.walmart.com/#/views/AMSParticipantQuery/Filters?:iid=1" target="_blank" style="text-decoration: none;">
                        <button class="rect-btn">Academy Participant Query</button>
                    </a>
                    <a href="https://forms.office.com/Pages/DesignPageV2.aspx?host=Excel_Win32&subpage=design&id=08O8PE0JBkCYSQ0R1h9ITU2s7rvgfu5AmjciD-OGmMNUMVpQTUE3WUQ0UzFWRlRXVTNZWEgxTkRNTy4u&auth_pvr=OrgId&analysis=true" target="_blank" style="text-decoration: none;">
                        <button class="rect-btn" style="background-color: #FF8C42;">Post Academy Training Results</button>
                    </a>
                </div>
                
                <!-- Last Updated Indicator -->
                <div style="text-align: center; margin: 20px 0; padding: 10px; background-color: #f0f4ff; border-radius: 8px;">
                    <p style="margin: 0; color: #5B7FFF; font-size: 14px;">
                        <strong>ðŸ“Š Data Last Refreshed:</strong> <span id="lastUpdated">Loading...</span>
                        <button id="refreshButton" onclick="refreshData()" style="margin-left: 15px; padding: 5px 15px; background-color: #5B7FFF; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; font-weight: 500;">
                            ðŸ”„ Refresh Now
                        </button>
                    </p>
                </div>

                <!-- Training Attended and Effectiveness Charts Row -->
                <div class="charts-row">
                    <!-- Training Attended Chart -->
                    <div class="chart-container">
                        <h3 class="chart-title">Training Attended</h3>
                        <canvas id="trainingChart"></canvas>
                    </div>

                    <!-- Effectiveness Chart -->
                    <div class="chart-container">
                        <h3 class="chart-title">How Effective Was the Training?</h3>
                        <canvas id="effectivenessChart"></canvas>
                    </div>
                </div>

                <!-- Training Needs Chart (Full Width) -->
                <div class="chart-container-full">
                    <h3 class="chart-title">Training Gaps</h3>
                    <canvas id="trainingNeedsChart"></canvas>
                </div>
            </div>
        </div>
    </section>
    </div>
    <!-- End Portal Content -->

    <!-- User ID Authentication Modal -->
    <div id="authModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="authModalTitle" style="display: none;">
        <div class="modal-content" style="background-color: white; padding: 40px; border-radius: 12px; max-width: 450px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
            <h2 id="authModalTitle" style="color: #5B7FFF; margin-bottom: 20px; text-align: center;">People Partner Portal Sign In</h2>
            <p style="font-size: 16px; line-height: 1.6; color: #333; margin-bottom: 25px; text-align: center;">
                Please enter your User ID to access the portal
            </p>
            <div style="margin-bottom: 25px;">
                <label for="userIdInput" style="display: block; font-size: 14px; font-weight: 600; color: #333; margin-bottom: 8px;">User ID:</label>
                <input 
                    type="text" 
                    id="userIdInput" 
                    placeholder="Enter your User ID" 
                    style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; box-sizing: border-box; transition: border-color 0.3s;"
                    onfocus="this.style.borderColor='#5B7FFF'"
                    onblur="this.style.borderColor='#ddd'"
                    onkeypress="if(event.key === 'Enter') { validateUserId(); }"
                />
                <div id="errorMessage" style="color: #ff4444; font-size: 14px; margin-top: 8px; display: none;"></div>
            </div>
            <div style="text-align: center;">
                <button onclick="validateUserId()" style="padding: 12px 40px; background-color: #5B7FFF; color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background-color 0.3s; width: 100%;" onmouseover="this.style.backgroundColor='#4A6BE6'" onmouseout="this.style.backgroundColor='#5B7FFF'">
                    Sign In
                </button>
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="modal">
        <span class="close" onclick="closeImageModal()">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <script>
        // Authentication Functions
        function openAuthModal() {
          const modal = document.getElementById('authModal');
          modal.style.display = 'block';
          document.body.style.overflow = 'hidden';
          // Focus on the input field
          setTimeout(() => {
            document.getElementById('userIdInput').focus();
          }, 100);
        }

        function closeAuthModal() {
          const modal = document.getElementById('authModal');
          modal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }

        function validateUserId() {
          const input = document.getElementById('userIdInput');
          const errorMessage = document.getElementById('errorMessage');
          const userId = input.value.trim();
          
          // Clear previous error
          errorMessage.style.display = 'none';
          
          // Basic validation - user ID should not be empty
          if (!userId) {
            errorMessage.textContent = 'Please enter a User ID';
            errorMessage.style.display = 'block';
            input.focus();
            return;
          }
          
          // Simple validation - check if user ID has at least 3 characters
          if (userId.length < 3) {
            errorMessage.textContent = 'User ID must be at least 3 characters';
            errorMessage.style.display = 'block';
            input.focus();
            return;
          }
          
          // Authentication successful - close modal and show content
          closeAuthModal();
          showPortalContent();
          
          // Note: We no longer store the user ID in sessionStorage
          // This ensures the auth modal appears on every page refresh
        }

        function showPortalContent() {
          const content = document.getElementById('portalContent');
          if (content) {
            content.style.display = 'block';
          }
        }

        function hidePortalContent() {
          const content = document.getElementById('portalContent');
          if (content) {
            content.style.display = 'none';
          }
        }

        function signOut() {
          // Hide portal content
          hidePortalContent();
          
          // Show auth modal
          openAuthModal();
          
          // Clear the input field
          const input = document.getElementById('userIdInput');
          if (input) {
            input.value = '';
          }
        }

        // Check authentication on page load
        window.addEventListener('DOMContentLoaded', function() {
          // Always require authentication on page load/refresh
          // This ensures the user ID option appears anytime the page is refreshed
          hidePortalContent();
          openAuthModal();
        });

        // Image Modal Functions
        function openImageModal(imageSrc) {
          const modal = document.getElementById('imageModal');
          const modalImage = document.getElementById('modalImage');
          modalImage.src = imageSrc;
          modal.style.display = 'block';
          document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
          const modal = document.getElementById('imageModal');
          modal.style.display = 'none';
          document.body.style.overflow = 'auto';
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
          const imageModal = document.getElementById('imageModal');
          
          if (event.target === imageModal) {
            closeImageModal();
          }
          // Note: Auth modal cannot be closed by clicking outside
        });

        // Close modals with Escape key
        window.addEventListener('keydown', function(event) {
          if (event.key === 'Escape') {
            const imageModal = document.getElementById('imageModal');
            
            // Only close image modal - auth modal stays open
            if (imageModal && imageModal.style.display === 'block') {
              closeImageModal();
            }
          }
        });

    </script>

    <!-- Chart.js Library -->
    <script src="./chart.js"></script>
    
    <script>
        // Fetch survey data and create charts
        document.addEventListener('DOMContentLoaded', function() {
            // Load data initially
            loadSurveyData();
        });

        // Function to load survey data
        function loadSurveyData() {
            const timestamp = new Date().getTime();
            // Defense-in-depth: Use multiple cache-busting mechanisms
            // - Query parameter (?t=) prevents URL caching
            // - cache: 'no-store' prevents Fetch API caching
            // - Headers provide additional insurance against HTTP caching
            return fetch('./combinedSurveyData.json?t=' + timestamp, {
                cache: 'no-store',
                headers: {
                    'Cache-Control': 'no-cache, no-store, must-revalidate',
                    'Pragma': 'no-cache',
                    'Expires': '0'
                }
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    createTrainingChart(data);
                    createEffectivenessChart(data);
                    createTrainingNeedsChart(data);
                    updateLastUpdatedTime();
                })
                .catch(error => {
                    console.error('Error loading survey data:', error);
                    displayDataLoadError();
                });
        }

        // Update the last updated timestamp
        function updateLastUpdatedTime() {
            const now = new Date();
            const formattedTime = now.toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                year: 'numeric',
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
            document.getElementById('lastUpdated').textContent = formattedTime;
        }

        // Display error message if data fails to load
        function displayDataLoadError() {
            const lastUpdatedElement = document.getElementById('lastUpdated');
            if (lastUpdatedElement) {
                lastUpdatedElement.textContent = 'Error loading data';
                lastUpdatedElement.style.color = '#ff0000';
            }
        }

        // Reload data when page becomes visible (user switches back to tab)
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                console.log('Page visible - refreshing data');
                loadSurveyData();
            }
        });

        // Function to refresh data manually (called by button)
        function refreshData() {
            console.log('Manual refresh triggered');
            const button = document.getElementById('refreshButton');
            // Disable button and show loading state
            button.disabled = true;
            button.innerHTML = 'ðŸ”„ Refreshing...';
            
            // Wait for loadSurveyData to complete before re-enabling button
            loadSurveyData()
                .then(() => {
                    // Success - return to normal state
                    button.innerHTML = 'ðŸ”„ Refresh Now';
                })
                .catch(() => {
                    // Error - show error state briefly
                    button.innerHTML = 'âŒ Refresh Failed';
                    button.style.backgroundColor = '#ff6b6b';
                    setTimeout(() => {
                        button.innerHTML = 'ðŸ”„ Refresh Now';
                        button.style.backgroundColor = '#5B7FFF';
                    }, 2000);
                })
                .finally(() => {
                    // Re-enable button after data loading completes
                    button.disabled = false;
                });
        }



        // Store chart instances to allow destruction on reload
        let trainingChartInstance = null;
        let effectivenessChartInstance = null;
        let trainingNeedsChartInstance = null;

        // Training Attended Doughnut Chart
        function createTrainingChart(data) {
            // Destroy existing chart if it exists
            if (trainingChartInstance) {
                trainingChartInstance.destroy();
            }
            
            const ctx = document.getElementById('trainingChart').getContext('2d');
            trainingChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['New Leaders', 'Leading Individual Contributors', 'Leading Leaders'],
                    datasets: [{
                        data: [
                            data.trainingAttended.newLeaders,
                            data.trainingAttended.leadingIndividualContributors,
                            data.trainingAttended.leadingLeaders
                        ],
                        backgroundColor: [
                            '#5B7FFF',
                            '#FF1493',
                            '#20B2AA'
                        ],
                        borderColor: [
                            '#4A6BE6',
                            '#E60D7B',
                            '#1A9A8F'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            position: 'left',
                            labels: {
                                font: { size: 14, weight: '600' },
                                padding: 20,
                                color: '#333',
                                usePointStyle: true
                            }
                        }
                    }
                }
            });
        }

        // Effectiveness Rating Bar Chart
        function createEffectivenessChart(data) {
            // Destroy existing chart if it exists
            if (effectivenessChartInstance) {
                effectivenessChartInstance.destroy();
            }
            
            const ctx = document.getElementById('effectivenessChart').getContext('2d');
            effectivenessChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Very Effective', 'Somewhat Effective', 'Neutral', 'Somewhat Ineffective', 'Neither'],
                    datasets: [{
                        label: 'Responses',
                        data: [
                            data.effectiveness.veryEffective,
                            data.effectiveness.somewhatEffective,
                            data.effectiveness.neutral,
                            data.effectiveness.somewhatIneffective,
                            data.effectiveness.neitherEffectiveNorIneffective
                        ],
                        backgroundColor: [
                            '#2DB84B',
                            '#5B7FFF',
                            '#FFB820',
                            '#FF8C42',
                            '#FF1493'
                        ],
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }

        // Training Needs Vertical Bar Chart
        function createTrainingNeedsChart(data) {
            // Destroy existing chart if it exists
            if (trainingNeedsChartInstance) {
                trainingNeedsChartInstance.destroy();
            }
            
            const ctx = document.getElementById('trainingNeedsChart').getContext('2d');
            trainingNeedsChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [
                        'Communication',
                        'Decision Making & Problem Solving',
                        'Team Building',
                        'Healthy Conflict',
                        'Strategic Thinking',
                        'Feedback & Coaching',
                        'Development Ownership & IDP',
                        'Career Conversations',
                        'Emotional Intelligence & Self-Awareness',
                        'Personal Brand & Presence',
                        'Navigating Change & Ambiguity',
                        'Influence & Persuasion',
                        'Negotiations',
                        'Rest & Resilience',
                        'Career Navigation'
                    ],
                    datasets: [{
                        label: 'Number of Selections',
                        data: [
                            data.trainingNeeds.communication,
                            data.trainingNeeds.decisionMakingProblemSolving,
                            data.trainingNeeds.teamBuilding,
                            data.trainingNeeds.healthyConflict,
                            data.trainingNeeds.strategicThinking,
                            data.trainingNeeds.feedbackCoaching,
                            data.trainingNeeds.developmentOwnershipIDP,
                            data.trainingNeeds.careerConversations,
                            data.trainingNeeds.emotionalIntelligenceSelfAwareness,
                            data.trainingNeeds.personalBrandPresence,
                            data.trainingNeeds.navigatingChangeAmbiguity,
                            data.trainingNeeds.influencePersuasion,
                            data.trainingNeeds.negotiations,
                            data.trainingNeeds.restResilience,
                            data.trainingNeeds.careerNavigation
                        ],
                        backgroundColor: [
                            '#0066CC',
                            '#5B7FFF',
                            '#FF1493',
                            '#20B2AA',
                            '#FFB820',
                            '#FF8C42',
                            '#9C27B0',
                            '#4CAF50',
                            '#F44336',
                            '#00BCD4',
                            '#FFC107',
                            '#795548',
                            '#607D8B',
                            '#E91E63',
                            '#3F51B5'
                        ],
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        },
                        x: {
                            ticks: {
                                autoSkip: false,
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }
    </script>

